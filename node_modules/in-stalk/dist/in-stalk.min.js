!function(){"use strict";!function(){function t(t,n,e){return t.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:e}))}function n(t){var n=t.getBoundingClientRect();return null!==t.offsetParent&&n.bottom>=0&&n.top<=window.innerHeight&&n.right>=0&&n.left<=window.innerWidth}var e=!1;if("function"!=typeof window.CustomEvent){var o=function(t){var n=arguments.length<=1||void 0===arguments[1]?{bubbles:!1,cancelable:!1,detail:void 0}:arguments[1],e=document.createEvent("CustomEvent");return e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),e};o.prototype=window.Event.prototype,window.CustomEvent=o,e=!0}var i=!1,u=!1,r=[],a=["load","scroll","hashchange","touchend","resize"],l=[],c=function(){r.length>0&&!i?s():0===r.length&&i&&f()},s=function(){i=!0,a.concat(l).forEach(function(t){return window.addEventListener(t,m)})},f=function(){i=!1,a.concat(l).forEach(function(t){return window.removeEventListener(t,m)})},d=function(e){var o=n(e.element);"in"!==e.status||o?"out"===e.status&&o?(t(e.element,"in-stalk.in"),t(e.element,e.element.getBoundingClientRect().top<0?"in-stalk.in.top":"in-stalk.in.bottom"),e.status="in"):"new"===e.status&&(e.status=o?"in":"out",o&&t(e.element,"in-stalk.in")):(t(e.element,"in-stalk.out"),t(e.element,e.element.getBoundingClientRect().bottom<0?"in-stalk.out.top":"in-stalk.out.bottom"),e.status="out")},m=function(){u=!0,r.forEach(d)},v={add:function(t){var n={element:t,status:"new"};r.push(n),u&&d(n),c()},remove:function(t){var n=r.filter(function(n){return n.element!==t});return n.length!==r.length?(r=n,c(),!0):!1},listenFor:function(t){f(),l=l.filter(function(n){return n!==t}).concat(t),c()},ignore:function(t){f(),l=l.filter(function(n){return n!==t}),c()},check:m};window.inStalk=v}()}();